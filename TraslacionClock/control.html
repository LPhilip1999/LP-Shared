<!DOCTYPE html>
<html lang="en">
<head>
    <title>Traslacion 2026 Manual Controller</title>
    <style>
        /* Initially hide the content until authorized */
        #protected-content { display: none; }
        body { font-family: sans-serif; text-align: center; padding: 30px; background: #1a1a1a; color: white; }
        .control-box { background: #333; padding: 20px; border-radius: 10px; display: inline-block; }
        input[type="datetime-local"] { font-size: 18px; padding: 10px; margin: 10px; border-radius: 5px; }
        button { font-size: 18px; padding: 12px 25px; margin: 10px; cursor: pointer; border: none; border-radius: 5px; font-weight: bold; }
        .btn-set { background: #007bff; color: white; }
        .btn-stop { background: #dc3545; color: white; }
        .btn-reset { background: #6c757d; color: white; }
        .status { margin: 15px; font-size: 1.2em; color: #ffc107; }
    </style>
</head>
<body>
    <div id="protected-content">
        <h1>Traslacion 2026 Manual Entry</h1>
        <div class="control-box">
            <p>Enter the Exact Start Time of the Procession:</p>
            <input type="datetime-local" id="startTimeInput" value="2026-01-09T04:30">
            <br>
            <button class="btn-set" onclick="startManualTimer()">SYNC & START</button>
            <button class="btn-stop" onclick="stopTimer()">STOP/FREEZE</button>
            <button class="btn-reset" onclick="resetToZero()">RESET TO ZERO</button>
        </div>
        <div class="status" id="status">Status: Waiting for input...</div>
        <h2 id="localDisplay">00:00:00</h2>
    </div>

    <script>
        // PASSCODE LOGIC
        const passcode = "5151"; // Change your passcode here
        const userEntry = prompt("Enter passcode to access timer controls:");

        if (userEntry === passcode) {
            document.getElementById('protected-content').style.display = 'block';
        } else {
            alert("Incorrect passcode. Access denied.");
            document.body.innerHTML = "<h1>Unauthorized Access</h1>";
        }

        // TIMER LOGIC
        let intervalId = null;

        function startManualTimer() {
            const inputVal = document.getElementById('startTimeInput').value;
            if (!inputVal) return alert("Please select a date and time!");
            const startTime = new Date(inputVal).getTime();
            if (intervalId) clearInterval(intervalId);
            document.getElementById('status').innerText = "Status: Calculating from " + inputVal;
            intervalId = setInterval(() => {
                const now = new Date().getTime();
                let diffInSeconds = Math.floor((now - startTime) / 1000);
                if (diffInSeconds < 0) diffInSeconds = 0;
                localStorage.setItem('traslacionDuration', diffInSeconds);
                updateLocalDisplay(diffInSeconds);
            }, 1000);
        }

        function stopTimer() {
            if (intervalId) {
                clearInterval(intervalId);
                intervalId = null;
                document.getElementById('status').innerText = "Status: Frozen";
            }
        }

        function resetToZero() {
            stopTimer();
            localStorage.setItem('traslacionDuration', '0');
            updateLocalDisplay(0);
            document.getElementById('status').innerText = "Status: Reset to Zero";
        }

        function updateLocalDisplay(totalSeconds) {
            const hrs = Math.floor(totalSeconds / 3600).toString().padStart(2, '0');
            const mins = Math.floor((totalSeconds % 3600) / 60).toString().padStart(2, '0');
            const secs = (totalSeconds % 60).toString().padStart(2, '0');
            document.getElementById('localDisplay').innerText = `${hrs}:${mins}:${secs}`;
        }
    </script>
</body>
</html>
